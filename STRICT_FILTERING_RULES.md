# –°–¢–†–û–ì–ò–ï –ü–†–ê–í–ò–õ–ê FILTERING.MD

## üö´ –ó–ê–ü–†–ï–©–ï–ù–û –ù–ê–í–°–ï–ì–î–ê

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```php
// ‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–ô–¢–ï –¢–ê–ö:
$db->saveRegion($data);
$db->saveCity($data);
$db->savePoi($data);

// ‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –°–û–ó–î–ê–í–ê–ô–¢–ï –¢–ï–°–¢–û–í–´–ï –î–ê–ù–ù–´–ï:
$testData = ['name_ru' => '–¢–µ—Å—Ç', 'business_id' => 'REG-001'];
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ Airtable
```php
// ‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–ô–¢–ï –¢–ê–ö:
$regions = $db->getRegions(); // –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
$cities = $db->getCitiesByRegion($id); // –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ Airtable
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
```php
// ‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –°–û–ó–î–ê–í–ê–ô–¢–ï:
create-test-data.php
test-data.php
sample-data.php
mock-data.php
```

## ‚úÖ –†–ê–ó–†–ï–®–ï–ù–û –¢–û–õ–¨–ö–û

### 1. –ß—Ç–µ–Ω–∏–µ –∏–∑ Airtable
```php
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
$airtable = new AirtableDataSource();
$regions = $airtable->getRegionsFromAirtable();
```

### 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Airtable
```php
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (—Ç–æ–ª—å–∫–æ –≤ sync-—Å–∫—Ä–∏–ø—Ç–∞—Ö):
$db->saveRegion($airtableData); // –î–∞–Ω–Ω—ã–µ –∏–∑ Airtable
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞
```php
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ):
DataGuard::enforceAirtableOnly(); // –ü—Ä–æ–≤–µ—Ä–∫–∞
$regions = $db->getValidRegions(); // –¢–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

## üîß –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –ö–û–ù–¢–†–û–õ–Ø

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π
```bash
php api/check-filtering-violations.php
```

### 2. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```php
DataGuard::enforceAirtableOnly(); // –í—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É –µ—Å–ª–∏ –Ω–µ—Ç Airtable
DataGuard::enforceNoLocalCreation(); // –í—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
DataGuard::enforceNoTestData(); // –í—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

### 3. API —Ç–æ–ª—å–∫–æ –¥–ª—è Airtable
```bash
# data-api.php —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å Airtable
curl "http://localhost:8000/api/data-api.php?action=regions"
```

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ö–û–ú–ú–ò–¢–û–ú

- [ ] –ù–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- [ ] –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ Airtable
- [ ] –õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∫—ç—à
- [ ] DataGuard::enforceAirtableOnly() —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] php api/check-filtering-violations.php –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

## üö® –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò

1. **DataGuard** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
2. **check-filtering-violations.php** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
3. **data-api.php** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å Airtable
4. **data-api-old.php** - —Å—Ç–∞—Ä—ã–π API (–∞—Ä—Ö–∏–≤)

## üí° –ü–†–ò–ù–¶–ò–ü–´

1. **Airtable - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**
2. **–õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ - —Ç–æ–ª—å–∫–æ –∫—ç—à**
3. **–ù–∏–∫–∞–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω–æ**
4. **–í—Å–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –≤ Airtable**
5. **–°—Ç—Ä–æ–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ**
