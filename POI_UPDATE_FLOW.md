# –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è POI ‚Äî –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–î–∞—Ç–∞**: 1 –æ–∫—Ç—è–±—Ä—è 2025

## ‚ö†Ô∏è –¢–ï–ö–£–©–ò–ô –ü–†–û–¶–ï–°–° (–ü–†–û–ë–õ–ï–ú–ê!)

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ–π—á–∞—Å:

```
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] 
    ‚Üì
[–ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ POI]
    ‚Üì
[–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ openCreatePOIModal(poi)]
    ‚Üì
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ]
    ‚Üì
[–ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å"]
    ‚Üì
[–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã]
    ‚Üì
[–°–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤ –æ–±—ä–µ–∫—Ç data]
    ‚Üì
[done(data) - —Ñ–æ—Ä–º–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è]
    ‚Üì
[Object.assign(poi, {...data}) - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏]
    ‚Üì
[renderPois() - –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫]
    ‚Üì
‚ùå –î–ê–ù–ù–´–ï –¢–û–õ–¨–ö–û –í –ü–ê–ú–Ø–¢–ò –ë–†–ê–£–ó–ï–†–ê!
‚ùå –ù–ï —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î!
‚ùå –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å Airtable!
```

### –ß—Ç–æ –Ω–µ —Ç–∞–∫:

```javascript
// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ edit-poi
const data = await openCreatePOIModal(poi);
if (!data) return;

// –û–±–Ω–æ–≤–ª—è–µ–º –¢–û–õ–¨–ö–û –ª–æ–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏
Object.assign(poi, {
  name: data.name_ru,
  name_en: data.name_en,
  // ... –∏ —Ç.–¥.
});

// –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º
await renderPois();

// ‚ùå –ù–ï–¢ –≤—ã–∑–æ–≤–∞ API –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!
// ‚ùå –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è!
```

## ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–†–û–¶–ï–°–° (–ù–£–ñ–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–¢–¨)

### –ö–∞–∫ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:

```
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] 
    ‚Üì
[–ù–∞–∂–∏–º–∞–µ—Ç "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"]
    ‚Üì
[–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞]
    ‚Üì
[–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ]
    ‚Üì
[–ù–∞–∂–∏–º–∞–µ—Ç "–û–±–Ω–æ–≤–∏—Ç—å"]
    ‚Üì
[–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã]
    ‚Üì
[–°–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ]
    ‚Üì
[done(data)]
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–û–•–†–ê–ù–ï–ù–ò–ï –í –ë–î –ò AIRTABLE  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. POST ‚Üí /api/save-poi.php ‚îÇ
‚îÇ 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite      ‚îÇ
‚îÇ 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Airtable   ‚îÇ
‚îÇ 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Tickets       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
[–ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç API]
    ‚Üì
[Object.assign(poi, data) - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞]
    ‚Üì
[renderPois() - –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞]
    ‚Üì
‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î
‚úÖ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å Airtable
‚úÖ –ë–∏–ª–µ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
‚úÖ –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è
```

## üîß –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ edit-poi (—Å—Ç—Ä–æ–∫–∞ ~2285)

**–°–µ–π—á–∞—Å:**
```javascript
const data = await openCreatePOIModal(poi);
if (!data) return;

// –û–±–Ω–æ–≤–ª—è–µ–º –¢–û–õ–¨–ö–û –≤ –ø–∞–º—è—Ç–∏
Object.assign(poi, {...});
await renderPois();
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```javascript
const data = await openCreatePOIModal(poi);
if (!data) return;

try {
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
  cards.innerHTML = '<div class="loading">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</div>';
  
  // –°–û–•–†–ê–ù–ï–ù–ò–ï –í –ë–î –ò AIRTABLE
  const saveResponse = await fetch('/api/save-poi.php', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      id: poi.id,
      airtable_id: poi.airtable_id, // –ï—Å–ª–∏ –µ—Å—Ç—å
      business_id: poi.poi_id,
      name_ru: data.name_ru,
      name_en: data.name_en,
      prefecture_ru: data.pref_ru,
      prefecture_en: data.pref_en,
      categories_ru: data.cats_ru,
      categories_en: data.cats_en,
      place_id: data.place_id,
      website: data.website,
      working_hours: data.hours,
      description_ru: data.desc_ru,
      description_en: data.desc_en,
      notes: data.notes,
      published: data.published,
      tickets: data.tickets,
      city_id: selectedCity.id,
      region_id: selectedRegion.id
    })
  });
  
  const result = await saveResponse.json();
  
  if (!result.ok) {
    throw new Error(result.error || '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
  }
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –ü–û–°–õ–ï —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  Object.assign(poi, {
    name: data.name_ru,
    name_en: data.name_en,
    type: data.cats_ru[0] || poi.type,
    // ... –∏ —Ç.–¥.
  });
  
  // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º
  await renderPois();
  
  // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  if (window.osNotify) {
    window.osNotify('POI —Å–æ—Ö—Ä–∞–Ω—ë–Ω', `${data.name_ru} –æ–±–Ω–æ–≤–ª—ë–Ω –≤ –ë–î –∏ Airtable`);
  }
  
} catch(e) {
  alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å POI: ' + e.message);
  // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
}
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –î–µ–π—Å—Ç–≤–∏–µ | –°–µ–π—á–∞—Å | –î–æ–ª–∂–Ω–æ –±—ã—Ç—å |
|----------|--------|-------------|
| **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç—å** | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Airtable** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Tickets** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ –ü–æ–ª–Ω–∞—è |

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–ü—Ä–∏ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç POI
2. –ù–∞–∂–∏–º–∞–µ—Ç "–û–±–Ω–æ–≤–∏—Ç—å"
3. –í–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ ‚úÖ
4. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)**
5. ‚ùå **–ò–∑–º–µ–Ω–µ–Ω–∏—è –ü–û–¢–ï–†–Ø–ù–´!**
6. –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î

**–ü–æ—á–µ–º—É:** –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ `poisByCity` –æ–±—ä–µ–∫—Ç–µ –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞, –Ω–æ –Ω–µ –±—ã–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

–î–æ–±–∞–≤–ª—é –≤—ã–∑–æ–≤ API –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ `edit-poi`.

