# Настройка токена Airtable

## Проблема
Синхронизация городов Хоккайдо не работает, потому что не настроен токен Airtable.

## Решение

### 1. Получите токен Airtable
1. Перейдите на https://airtable.com/create/tokens
2. Войдите в свой аккаунт Airtable
3. Создайте новый Personal Access Token
4. Выберите следующие разрешения:
   - `data.records:read` - для чтения записей
   - `data.records:write` - для записи записей
   - `schema.bases:read` - для чтения структуры баз
5. Скопируйте созданный токен

### 2. Настройте токен в конфигурации
Откройте файл `api/config.php` и замените:

```php
'api_key' => 'PLACEHOLDER_FOR_REAL_API_KEY',
```

на:

```php
'api_key' => 'YOUR_ACTUAL_AIRTABLE_TOKEN_HERE',
```

### 3. Альтернативно - через переменные окружения
Установите переменную окружения:

```bash
export AIRTABLE_PAT="YOUR_ACTUAL_AIRTABLE_TOKEN_HERE"
```

### 4. Проверьте настройку
После настройки токена запустите:

```bash
php api/check-cities-structure.php
```

Должна вернуться структура таблицы городов вместо ошибки.

### 5. Запустите синхронизацию
После настройки токена:
1. Откройте админ-панель
2. Перейдите в раздел "Регионы"
3. Нажмите кнопку синхронизации (синяя кнопка с двумя стрелками)
4. Города Хоккайдо должны синхронизироваться

## Структура таблицы городов
Ожидаемые поля в таблице городов:
- `Name (RU)` - название на русском
- `Name (EN)` - название на английском  
- `A ID` или `City ID` - бизнес ID города (CTY-XXXX)
- `Regions` - связанная запись региона
- `Type` - тип (city/location)

## Отладка
Если синхронизация все еще не работает:
1. Проверьте, что токен правильный
2. Проверьте, что у токена есть права на чтение таблицы городов
3. Запустите `php api/check-cities-structure.php` для диагностики
4. Проверьте логи в консоли браузера
