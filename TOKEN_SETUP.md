# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ API

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

### 1. –°–æ–∑–¥–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å —Ç–æ–∫–µ–Ω–æ–º
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞
cp api/airtable.env api/airtable.env.local

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω
nano api/airtable.env.local
```

### 2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω Airtable
–í —Ñ–∞–π–ª–µ `api/airtable.env.local` –∑–∞–º–µ–Ω–∏—Ç–µ:
```
AIRTABLE_PAT=your_airtable_token_here
```
–Ω–∞:
```
AIRTABLE_PAT=patXXXXXXXXXXXXXX.XXXXXXXXXXXXXX.XXXXXXXXXXXXXX
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
php api/check-cities-structure.php
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ì–æ—Ä–æ–¥–∞ –•–æ–∫–∫–∞–π–¥–æ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–§–∞–π–ª—ã —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –ù–ï –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ Git:**
- `api/airtable.env.local` - –∏—Å–∫–ª—é—á–µ–Ω –≤ `.gitignore`
- `.env` - –∏—Å–∫–ª—é—á–µ–Ω –≤ `.gitignore`
- `api/.env` - –∏—Å–∫–ª—é—á–µ–Ω –≤ `.gitignore`

‚úÖ **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤:**
1. `api/airtable.env.local` (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª)
2. `api/airtable.env` (–ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞)
3. `api/.env` (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. `api/.env.local` (–µ—Å–ª–∏ –µ—Å—Ç—å)
5. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

## –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ Airtable

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://airtable.com/create/tokens
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Airtable
3. –°–æ–∑–¥–∞–π—Ç–µ Personal Access Token
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞:
   - `data.records:read` - —á—Ç–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
   - `data.records:write` - –∑–∞–ø–∏—Å—å –∑–∞–ø–∏—Å–µ–π
   - `schema.bases:read` - —á—Ç–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `pat-`)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã

### –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
```bash
export AIRTABLE_PAT="patXXXXXXXXXXXXXX.XXXXXXXXXXXXXX.XXXXXXXXXXXXXX"
```

### –ß–µ—Ä–µ–∑ .env —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
echo "AIRTABLE_PAT=patXXXXXXXXXXXXXX.XXXXXXXXXXXXXX.XXXXXXXXXXXXXX" > .env
```

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª: `chmod 600 api/airtable.env.local`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `php -l api/airtable.env.local`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É: `php -r "require 'api/load-env.php'; echo getenv('AIRTABLE_PAT');"`
