# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### 1. GitHub Actions Workflow
- ‚úÖ **–§–∞–π–ª:** `.github/workflows/deploy.yml`
- ‚úÖ **–°–µ–∫—Ä–µ—Ç—ã:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä–µ—Ç `AIRTABLE_PAT` –∏–∑ GitHub Secrets
- ‚úÖ **–ü—É—Ç—å:** –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª –≤ `$HOME/konstructour/secrets/airtable.json`
- ‚úÖ **Health checks:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 2. SecretManager
- ‚úÖ **–§–∞–π–ª:** `api/secret-manager.php`
- ‚úÖ **–õ–æ–≥–∏–∫–∞:** ENV ‚Üí $HOME ‚Üí legacy fallback
- ‚úÖ **–§–æ—Ä–º–∞—Ç:** `{"current":{"token":"pat.xxx","since":"2025-10-01"},"next":{"token":null,"since":null}}`

### 3. Health Monitoring
- ‚úÖ **–§–∞–π–ª:** `api/health-airtable.php`
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω:** –†–∞–±–æ—Ç–∞–µ—Ç —Å SecretManager
- ‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Secrets
–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–æ–±–∞–≤–∏—Ç—å:
```
AIRTABLE_PAT=pat.xxx... (–≤–∞—à —Ç–æ–∫–µ–Ω Airtable)
API_BASE=https://your-domain.com
SERVER_HOST=your-server.com
SERVER_USER=username
SERVER_PATH=/path/to/site
SECRET_DIR=/home/username/konstructour/secrets
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π
```bash
# –ß–µ—Ä–µ–∑ GitHub Actions (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
git push origin main

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ workflow_dispatch
# –ü–µ—Ä–µ–π—Ç–∏ –≤ Actions ‚Üí Deploy to Bluehost ‚Üí Run workflow
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```bash
# Health check
curl "https://your-domain.com/api/health-airtable.php" | jq .

# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
{
  "ok": true,
  "reason": "current_working",
  "message": "Current token is working"
}
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "file_missing"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh user@server "ls -la ~/konstructour/secrets/"
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–π–ª airtable.json
```

### –ü—Ä–æ–±–ª–µ–º–∞: "permission_denied"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ssh user@server "ls -la ~/konstructour/secrets/airtable.json"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: -rw------- 1 user user
```

### –ü—Ä–æ–±–ª–µ–º–∞: "token_missing"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
ssh user@server "cat ~/konstructour/secrets/airtable.json"
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π JSON —Å —Ç–æ–∫–µ–Ω–æ–º
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –¥–æ—Å—Ç—É–ø–Ω—ã:

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã:**
   ```
   GET /api/diagnostics.php
   ```

2. **–û—Ç—á–µ—Ç –æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö:**
   ```
   GET /api/reference-parity.php
   ```

3. **–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤:**
   ```
   GET /api/tickets-discover.php
   ```

4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤:**
   ```
   GET /api/sync-references.php
   ```

5. **–ë–∞—Ç—á-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è POI:**
   ```
   GET /api/poi-batch-sync.php
   ```

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
- ‚úÖ –¢–æ–∫–µ–Ω Airtable –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ Health check –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `ok: true`
- ‚úÖ –í—Å–µ –Ω–æ–≤—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ GitHub Actions** - —Ç–∞–º –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å health-airtable.php** - –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–±–ª–µ–º—ã
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** - —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Ç–∞–µ–º—ã–º PHP-–ø—Ä–æ—Ü–µ—Å—Å–æ–º
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON** - –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å SecretManager

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é!** üöÄ
