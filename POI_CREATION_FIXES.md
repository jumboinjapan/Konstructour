# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è POI ‚Äî –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–î–∞—Ç–∞**: 1 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º—ã**: –û—à–∏–±–∫–∞ Airtable 422 + –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –±–∏–ª–µ—Ç—ã

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–£–±—Ä–∞–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∏–ª–µ—Ç–æ–≤** ‚úÖ

**–ë—ã–ª–æ:**
```javascript
// –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–ª–µ—Ç–æ–≤ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –µ—Å–ª–∏ –µ—Å—Ç—å - —Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
if (hasTicketData && !ticketsValid) {
  alert('–ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã –±–∏–ª–µ—Ç—ã, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è (—Ç–∏–ø –∏ —Ü–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã)');
  return;
}
```

**–°—Ç–∞–ª–æ:**
```javascript
// –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ –±–∏–ª–µ—Ç–∞—Ö (–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
ticketRows.forEach(row => {
  const type = row.querySelector('.ticket-type').value;
  const price = row.querySelector('.ticket-price').value;
  const currency = row.querySelector('.ticket-currency').value;
  
  // –î–æ–±–∞–≤–ª—è–µ–º –±–∏–ª–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —Ç–∏–ø –∏ —Ü–µ–Ω–∞
  if (type && price) {
    tickets.push({
      category: type,
      price: parseInt(price),
      currency: currency
    });
  }
});

// –ë–∏–ª–µ—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã - –Ω–∏–∫–∞–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å POI –±–µ–∑ –±–∏–ª–µ—Ç–æ–≤
- ‚úÖ –ë–∏–ª–µ—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ Airtable 422** ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Airtable –≤–æ–∑–≤—Ä–∞—â–∞–ª 422 –æ—à–∏–±–∫—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ POI
- –ü—Ä–∏—á–∏–Ω–∞: –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π –≤ Airtable

**–†–µ—à–µ–Ω–∏–µ:**
```php
// –ë–´–õ–û: –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –≤—Å–µ –ø–æ–ª—è, –≤–∫–ª—é—á–∞—è –ø—É—Å—Ç—ã–µ
$airtableFields = [
    'POI ID' => $data['business_id'],
    'POI Name (RU)' => $data['name_ru'],
    'Prefecture (RU)' => $data['prefecture_ru'] ?? '', // –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞!
    'Website' => $data['website'] ?? '', // –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞!
    // ...
];

// –°–¢–ê–õ–û: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–ø—É—Å—Ç—ã–µ –ø–æ–ª—è
$airtableFields = [
    'POI ID' => $data['business_id'],
    'POI Name (RU)' => $data['name_ru'],
    'POI Name (EN)' => $data['name_en'] ?? ''
];

// –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–ø—É—Å—Ç—ã–µ –ø–æ–ª—è
if (!empty($data['prefecture_ru'])) {
    $airtableFields['Prefecture (RU)'] = $data['prefecture_ru'];
}
if (!empty($data['website'])) {
    $airtableFields['Website'] = $data['website'];
}
// –∏ —Ç.–¥.
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫** ‚úÖ

**–ù–æ–≤–æ–µ:**
```php
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
error_log("Airtable request: $method $url");
error_log("Airtable payload: " . json_encode($payload, JSON_UNESCAPED_UNICODE));

// –ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—à–∏–±–∫–∞
if ($code >= 200 && $code < 300) {
    $airtableResult = json_decode($resp, true);
} else {
    $errorDetails = json_decode($resp, true);
    respond(false, [
        'error' => "Airtable sync failed: $code",
        'airtable_error' => $errorDetails,
        'payload' => $payload,
        'url' => $url
    ], 500);
}
```

### 4. **–°–æ–∑–¥–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç** ‚úÖ

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `/api/debug-airtable.php`

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Airtable
- –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–ª–µ–π —Ç–∞–±–ª–∏—Ü—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
GET https://www.konstructour.com/api/debug-airtable.php
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ **–ë–∏–ª–µ—Ç—ã:**
- **–ë—ã–ª–æ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –≤—Å–µ—Ö POI
- **–°—Ç–∞–ª–æ:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
- **–ú–æ–∂–Ω–æ:** –°–æ–∑–¥–∞–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏

### ‚úÖ **Airtable 422:**
- **–ë—ã–ª–æ:** –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ POI
- **–°—Ç–∞–ª–æ:** –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
- **–ü—Ä–∏—á–∏–Ω–∞:** –£–±—Ä–∞–Ω—ã –ø—É—Å—Ç—ã–µ –ø–æ–ª—è –∏–∑ –∑–∞–ø—Ä–æ—Å–∞

### ‚úÖ **–û—Ç–ª–∞–¥–∫–∞:**
- **–ë—ã–ª–æ:** –ù–µ–ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏
- **–°—Ç–∞–ª–æ:** –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### 1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Airtable:**
```
https://www.konstructour.com/api/debug-airtable.php
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
tail -f /var/log/apache2/error.log | grep "Airtable"
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
```javascript
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ POI —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ Network tab
// POST /api/save-poi.php
// Response –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –æ—à–∏–±–∫—É
```

## üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ POI –±–µ–∑ –±–∏–ª–µ—Ç–æ–≤:**
- ‚úÖ –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å –±–∏–ª–µ—Ç—ã –ø—É—Å—Ç—ã–º–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
- ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫

### 2. **–°–æ–∑–¥–∞–Ω–∏–µ POI —Å –±–∏–ª–µ—Ç–∞–º–∏:**
- ‚úÖ –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –±–∏–ª–µ—Ç—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
- ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫

### 3. **–°–æ–∑–¥–∞–Ω–∏–µ POI —Å —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –±–∏–ª–µ—Ç–∞–º–∏:**
- ‚úÖ –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –±–∏–ª–µ—Ç —Å —Ç–∏–ø–æ–º, –Ω–æ –±–µ–∑ —Ü–µ–Ω—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
- ‚úÖ –ë–∏–ª–µ—Ç –¥–æ–ª–∂–µ–Ω –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è (–Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è)

## üéâ –ò—Ç–æ–≥–∏

**–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:**
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å POI –±–µ–∑ –±–∏–ª–µ—Ç–æ–≤ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏)
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å POI —Å –±–∏–ª–µ—Ç–∞–º–∏ (–ø–ª–∞—Ç–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏)
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å POI —Å —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –±–∏–ª–µ—Ç–∞–º–∏
- ‚úÖ –ü–æ–ª—É—á–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å Airtable

**–û—à–∏–±–∫–∞ Airtable 422 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!** üöÄ

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é**: ‚úÖ –î–∞
