# Internationalization & Localization Guide for Constructour (2025)

Интерфейс Constructour должен поддерживать несколько языков (например, русский, английский, японский). Первоначальный набор документов упоминал мультиязычность, но не предоставлял конкретных рекомендаций【534680704413190†L654-L671】. Этот документ описывает подход к реализации i18n и локализации.

## 1 Библиотеки и архитектура

- Используйте библиотеку **react‑i18next** или **next‑i18next** (для Next.js). Она обеспечивает простую интеграцию с React, асинхронную загрузку переводов и механизм pluralization.
- Организуйте переводческие файлы в директории `public/locales/{lang}/translation.json`. Храните строки в структуре «key‑value».
- Загружайте переводы на основании предпочтений пользователя (Accept‑Language), параметра URL (`?lang=ru`) или настройки в профиле. По умолчанию используйте английский.

## 2 Добавление переводов

1. Создайте базовый файл `public/locales/en/translation.json` с ключами: `{"welcome": "Welcome", "startDate": "Start date"}`.
2. Добавьте соответствующие файлы для других языков (например, `public/locales/ru/translation.json`). Убедитесь, что ключи совпадают и порядок сохраняется.
3. При разработке избегайте хардкодинга строк. Вместо этого используйте хук `useTranslation()`:

```tsx
import { useTranslation } from 'react-i18next';

export function DateLabel() {
  const { t } = useTranslation();
  return <label>{t('startDate')}</label>;
}
```

## 3 Переключение языка

- Создайте компонент LanguageSwitcher, который отображает доступные языки и сохраняет выбор пользователя (например, в `localStorage` или в профиле). 
- Передавайте выбранный язык в провайдер `I18nextProvider` или через `next-i18next.config.js`.
- Поддерживайте переключение как в шапке сайта, так и в настройках пользователя.

## 4 Форматирование дат и чисел

- Используйте Intl API (`Intl.DateTimeFormat` и `Intl.NumberFormat`) для локализации дат, времени и валют. 
- Пример: `new Intl.DateTimeFormat('ru-RU', { dateStyle: 'long' }).format(new Date())`.
- Не полагайтесь только на форматировку i18n‑библиотеки: для валют и чисел используйте соответствующие локали.

## 5 Правосторонние (RTL) языки

- При необходимости поддерживайте языки, читающиеся справа налево (например, арабский, иврит). React‑i18next позволяет переключить направление через `<html dir="rtl">`. 
- Tailwind CSS поддерживает RTL через плагин `tailwindcss-rtl`. Добавляйте поддержку только если планируется расширение на такие языки.

## 6 Тестирование локализации

- Проверяйте каждую строку интерфейса на всех поддерживаемых языках. Убедитесь, что текст помещается, не вылезает за пределы кнопок и полей.
- Настройте автоматические тесты, которые создают снимки страниц в разных языках (например, Playwright с настройкой locale).
- Для изменения направленности (LTR/RTL) проверяйте отображение компонентов и плавность переходов.

## 7 Заключение

Поддержка мультиязычности делает приложение доступным для широкой аудитории и улучшает впечатление пользователя. Следуя этому руководству, вы обеспечите корректную реализацию i18n, удобное переключение языка и корректное отображение дат и чисел. Дополняйте переводческие файлы новыми ключами по мере расширения функциональности, поддерживая их синхронность между языками.